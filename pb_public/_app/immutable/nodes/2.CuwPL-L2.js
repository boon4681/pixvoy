import{s as K,e as V,a as P,t as G,c as C,b as j,g as T,f as p,d as L,H as De,o as te,m as w,i as I,h as D,I as Ee,p as Ve,q as Ce,j as F,J as Ne,k as je,n as M,K as ye,l as O,z as de,u as ne,A as Se,r as He,L as _e,w as Ae,x as Me,y as Pe,M as Ie,C as Te,N as ze}from"../chunks/scheduler.BtLdG6yN.js";import{S as Q,i as W,c as y,a as S,m as H,g as Y,b,e as Z,t as v,d as A}from"../chunks/index.CaxwweJU.js";import{B as re,u as Be,p as X,a as Ge,c as me,g as Le,e as ae}from"../chunks/Toaster.svelte_svelte_type_style_lang.D4tMB4yU.js";import{c as qe,S as Oe,A as Re,a as Xe,b as Je,R as Ke,h as pe,u as Ue,D as Fe,d as Qe,e as We,f as Ye,H as Ze}from"../chunks/clickToCopy.B06dVamd.js";function xe(n){let e,s;return e=new Oe({props:{class:"h-4 w-4"}}),{c(){y(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,a){H(e,t,a),s=!0},p:M,i(t){s||(v(e.$$.fragment,t),s=!0)},o(t){b(e.$$.fragment,t),s=!1},d(t){A(e,t)}}}function et(n){let e,s;return e=new re({props:{variant:"secondary",size:"sm",class:"rounded-full",$$slots:{default:[at]},$$scope:{ctx:n}}}),e.$on("click",n[8]),{c(){y(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,a){H(e,t,a),s=!0},p(t,a){const l={};a&512&&(l.$$scope={dirty:a,ctx:t}),e.$set(l)},i(t){s||(v(e.$$.fragment,t),s=!0)},o(t){b(e.$$.fragment,t),s=!1},d(t){A(e,t)}}}function tt(n){let e,s;return e=new re({props:{variant:"blue",size:"sm",class:"rounded-full",$$slots:{default:[st]},$$scope:{ctx:n}}}),e.$on("click",n[7]),{c(){y(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,a){H(e,t,a),s=!0},p(t,a){const l={};a&512&&(l.$$scope={dirty:a,ctx:t}),e.$set(l)},i(t){s||(v(e.$$.fragment,t),s=!0)},o(t){b(e.$$.fragment,t),s=!1},d(t){A(e,t)}}}function at(n){let e;return{c(){e=G("Save")},l(s){e=L(s,"Save")},m(s,t){I(s,e,t)},d(s){s&&p(e)}}}function st(n){let e;return{c(){e=G("Saved")},l(s){e=L(s,"Saved")},m(s,t){I(s,e,t)},d(s){s&&p(e)}}}function lt(n){let e,s,t,a,l,r,c,i,_,g,f,$,o,u,h,m,d,k,B,z,ie="",R,se,oe;_=new re({props:{variant:"secondary",size:"icon",class:"rounded-full",$$slots:{default:[xe]},$$scope:{ctx:n}}});const ce=[tt,et],q=[];function fe(E,N){return E[0]?0:1}return d=fe(n),k=q[d]=ce[d](n),{c(){e=V("div"),s=V("img"),a=P(),l=V("div"),r=P(),c=V("div"),i=V("div"),y(_.$$.fragment),f=P(),$=V("div"),o=V("h3"),u=G(n[3]),h=P(),m=V("div"),k.c(),B=P(),z=V("div"),z.innerHTML=ie,this.h()},l(E){e=C(E,"DIV",{class:!0});var N=j(e);s=C(N,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),a=T(N),l=C(N,"DIV",{class:!0}),j(l).forEach(p),r=T(N),c=C(N,"DIV",{class:!0});var U=j(c);i=C(U,"DIV",{});var J=j(i);S(_.$$.fragment,J),J.forEach(p),U.forEach(p),f=T(N),$=C(N,"DIV",{class:!0});var x=j($);o=C(x,"H3",{class:!0});var ue=j(o);u=L(ue,n[3]),ue.forEach(p),h=T(x),m=C(x,"DIV",{class:!0});var ee=j(m);k.l(ee),B=T(ee),z=C(ee,"DIV",{class:!0,"data-svelte-h":!0}),De(z)!=="svelte-zvx4vn"&&(z.innerHTML=ie),ee.forEach(p),x.forEach(p),N.forEach(p),this.h()},h(){te(s.src,t=n[2])||w(s,"src",t),w(s,"alt",n[3]),w(s,"width",300),w(s,"height",400),w(s,"class","object-cover w-full h-full transition-transform duration-300 group-hover:scale-105"),w(l,"class","absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-opacity duration-300 flex flex-col justify-between p-4"),w(c,"class","absolute top-4 right-4 flex justify-end opacity-0 group-hover:opacity-100 transition-opacity duration-300"),w(o,"class","text-white font-semibold truncate"),w(z,"class","flex space-x-2"),w(m,"class","flex justify-between items-center mt-2"),w($,"class","absolute bottom-0 p-4 w-full opacity-0 group-hover:opacity-100 transition-opacity duration-300"),w(e,"class","relative group overflow-hidden rounded-lg select-none")},m(E,N){I(E,e,N),D(e,s),D(e,a),D(e,l),D(e,r),D(e,c),D(c,i),H(_,i,null),D(e,f),D(e,$),D($,o),D(o,u),D($,h),D($,m),q[d].m(m,null),D(m,B),D(m,z),R=!0,se||(oe=[Ee(l,"click",n[6]),Ve(g=qe.call(null,i,`${window.location.origin}/v/${n[1]}`))],se=!0)},p(E,[N]){(!R||N&4&&!te(s.src,t=E[2]))&&w(s,"src",t),(!R||N&8)&&w(s,"alt",E[3]);const U={};N&512&&(U.$$scope={dirty:N,ctx:E}),_.$set(U),g&&Ce(g.update)&&N&2&&g.update.call(null,`${window.location.origin}/v/${E[1]}`),(!R||N&8)&&F(u,E[3]);let J=d;d=fe(E),d===J?q[d].p(E,N):(Y(),b(q[J],1,1,()=>{q[J]=null}),Z(),k=q[d],k?k.p(E,N):(k=q[d]=ce[d](E),k.c()),v(k,1),k.m(m,B))},i(E){R||(v(_.$$.fragment,E),v(k),R=!0)},o(E){b(_.$$.fragment,E),b(k),R=!1},d(E){E&&p(e),A(_),q[d].d(),se=!1,Ne(oe)}}}function nt(n,e,s){let t;je(n,Be,$=>s(4,t=$));let{id:a}=e,{src:l}=e,{title:r}=e,{liked:c}=e,{saved:i}=e;function _($){ye.call(this,n,$)}const g=async()=>{await X.collection("saved_posts").delete(i),s(0,i="")},f=async()=>{s(0,i=(await X.collection("saved_posts").create({owner:t==null?void 0:t.id,saved:a})).id)};return n.$$set=$=>{"id"in $&&s(1,a=$.id),"src"in $&&s(2,l=$.src),"title"in $&&s(3,r=$.title),"liked"in $&&s(5,c=$.liked),"saved"in $&&s(0,i=$.saved)},[i,a,l,r,t,c,_,g,f]}class rt extends Q{constructor(e){super(),W(this,e,nt,lt,K,{id:1,src:2,title:3,liked:5,saved:0})}}function it(n){let e;return{c(){e=G("PX")},l(s){e=L(s,"PX")},m(s,t){I(s,e,t)},d(s){s&&p(e)}}}function ot(n){let e,s,t,a;return e=new Xe({props:{src:"https://avatar.boon4681.com/api/marble/"+n[0]+".svg",alt:"@shadcn"}}),t=new Je({props:{$$slots:{default:[it]},$$scope:{ctx:n}}}),{c(){y(e.$$.fragment),s=P(),y(t.$$.fragment)},l(l){S(e.$$.fragment,l),s=T(l),S(t.$$.fragment,l)},m(l,r){H(e,l,r),I(l,s,r),H(t,l,r),a=!0},p(l,r){const c={};r&1&&(c.src="https://avatar.boon4681.com/api/marble/"+l[0]+".svg"),e.$set(c);const i={};r&2&&(i.$$scope={dirty:r,ctx:l}),t.$set(i)},i(l){a||(v(e.$$.fragment,l),v(t.$$.fragment,l),a=!0)},o(l){b(e.$$.fragment,l),b(t.$$.fragment,l),a=!1},d(l){l&&p(s),A(e,l),A(t,l)}}}function ct(n){let e,s;return e=new Re({props:{$$slots:{default:[ot]},$$scope:{ctx:n}}}),{c(){y(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,a){H(e,t,a),s=!0},p(t,[a]){const l={};a&3&&(l.$$scope={dirty:a,ctx:t}),e.$set(l)},i(t){s||(v(e.$$.fragment,t),s=!0)},o(t){b(e.$$.fragment,t),s=!1},d(t){A(e,t)}}}function ft(n,e,s){let{username:t}=e;return n.$$set=a=>{"username"in a&&s(0,t=a.username)},[t]}class ut extends Q{constructor(e){super(),W(this,e,ft,ct,K,{username:0})}}const ge=Ge({base:"focus:ring-ring inline-flex select-none items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2",variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/80 border-transparent",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 border-transparent",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/80 border-transparent",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function le(n){let e,s,t;const a=n[5].default,l=He(a,n,n[4],null);let r=[{href:n[1]},{class:s=me(ge({variant:n[2],className:n[0]}))},n[3]],c={};for(let i=0;i<r.length;i+=1)c=ne(c,r[i]);return{c(){e=V(n[1]?"a":"span"),l&&l.c(),this.h()},l(i){e=C(i,((n[1]?"a":"span")||"null").toUpperCase(),{href:!0,class:!0});var _=j(e);l&&l.l(_),_.forEach(p),this.h()},h(){_e(n[1]?"a":"span")(e,c)},m(i,_){I(i,e,_),l&&l.m(e,null),t=!0},p(i,_){l&&l.p&&(!t||_&16)&&Ae(l,a,i,i[4],t?Pe(a,i[4],_,null):Me(i[4]),null),_e(i[1]?"a":"span")(e,c=Le(r,[(!t||_&2)&&{href:i[1]},(!t||_&5&&s!==(s=me(ge({variant:i[2],className:i[0]}))))&&{class:s},_&8&&i[3]]))},i(i){t||(v(l,i),t=!0)},o(i){b(l,i),t=!1},d(i){i&&p(e),l&&l.d(i)}}}function dt(n){let e=n[1]?"a":"span",s,t,a=(n[1]?"a":"span")&&le(n);return{c(){a&&a.c(),s=O()},l(l){a&&a.l(l),s=O()},m(l,r){a&&a.m(l,r),I(l,s,r),t=!0},p(l,[r]){l[1],e?K(e,l[1]?"a":"span")?(a.d(1),a=le(l),e=l[1]?"a":"span",a.c(),a.m(s.parentNode,s)):a.p(l,r):(a=le(l),e=l[1]?"a":"span",a.c(),a.m(s.parentNode,s))},i(l){t||(v(a,l),t=!0)},o(l){b(a,l),t=!1},d(l){l&&p(s),a&&a.d(l)}}}function _t(n,e,s){const t=["class","href","variant"];let a=de(e,t),{$$slots:l={},$$scope:r}=e,{class:c=void 0}=e,{href:i=void 0}=e,{variant:_="default"}=e;return n.$$set=g=>{e=ne(ne({},e),Se(g)),s(3,a=de(e,t)),"class"in g&&s(0,c=g.class),"href"in g&&s(1,i=g.href),"variant"in g&&s(2,_=g.variant),"$$scope"in g&&s(4,r=g.$$scope)},[c,i,_,a,r,l]}class mt extends Q{constructor(e){super(),W(this,e,_t,dt,K,{class:0,href:1,variant:2})}}function ve(n,e,s){const t=n.slice();return t[5]=e[s],t}function $e(n,e,s){const t=n.slice();return t[8]=e[s],t}function he(n){let e,s;function t(){return n[2](n[8])}return e=new rt({props:{id:n[8].id,saved:n[8].saved,liked:n[8].liked,src:n[8].image,title:n[8].title}}),e.$on("click",t),{c(){y(e.$$.fragment)},l(a){S(e.$$.fragment,a)},m(a,l){H(e,a,l),s=!0},p(a,l){n=a;const r={};l&1&&(r.id=n[8].id),l&1&&(r.saved=n[8].saved),l&1&&(r.liked=n[8].liked),l&1&&(r.src=n[8].image),l&1&&(r.title=n[8].title),e.$set(r)},i(a){s||(v(e.$$.fragment,a),s=!0)},o(a){b(e.$$.fragment,a),s=!1},d(a){A(e,a)}}}function be(n){let e,s,t,a={ctx:n,current:null,token:null,hasCatch:!1,pending:kt,then:gt,catch:pt,value:4,blocks:[,,,]};return pe(s=X.send(`/user/view/${n[1].owner}`,{method:"GET"}),a),{c(){e=O(),a.block.c()},l(l){e=O(),a.block.l(l)},m(l,r){I(l,e,r),a.block.m(l,a.anchor=r),a.mount=()=>e.parentNode,a.anchor=e,t=!0},p(l,r){n=l,a.ctx=n,r&2&&s!==(s=X.send(`/user/view/${n[1].owner}`,{method:"GET"}))&&pe(s,a)||Ue(a,n,r)},i(l){t||(v(a.block),t=!0)},o(l){for(let r=0;r<3;r+=1){const c=a.blocks[r];b(c)}t=!1},d(l){l&&p(e),a.block.d(l),a.token=null,a=null}}}function pt(n){return{c:M,l:M,m:M,p:M,i:M,o:M,d:M}}function gt(n){let e,s;return e=new Fe({props:{class:"sm:max-w-[700px] w-screen",$$slots:{default:[bt]},$$scope:{ctx:n}}}),{c(){y(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,a){H(e,t,a),s=!0},p(t,a){const l={};a&2050&&(l.$$scope={dirty:a,ctx:t}),e.$set(l)},i(t){s||(v(e.$$.fragment,t),s=!0)},o(t){b(e.$$.fragment,t),s=!1},d(t){A(e,t)}}}function vt(n){let e=n[1].title+"",s;return{c(){s=G(e)},l(t){s=L(t,e)},m(t,a){I(t,s,a)},p(t,a){a&2&&e!==(e=t[1].title+"")&&F(s,e)},d(t){t&&p(s)}}}function $t(n){let e,s,t,a,l=n[4].username+"",r,c,i,_,g=n[4].username+"",f,$,o,u,h,m;return s=new ut({props:{username:n[4].username}}),o=new We({props:{class:"pt-2",$$slots:{default:[vt]},$$scope:{ctx:n}}}),h=new Ye({}),{c(){e=V("div"),y(s.$$.fragment),t=P(),a=V("div"),r=G(l),c=P(),i=V("div"),_=G("@"),f=G(g),$=P(),y(o.$$.fragment),u=P(),y(h.$$.fragment),this.h()},l(d){e=C(d,"DIV",{class:!0});var k=j(e);S(s.$$.fragment,k),t=T(k),a=C(k,"DIV",{class:!0});var B=j(a);r=L(B,l),c=T(B),i=C(B,"DIV",{class:!0});var z=j(i);_=L(z,"@"),f=L(z,g),z.forEach(p),B.forEach(p),k.forEach(p),$=T(d),S(o.$$.fragment,d),u=T(d),S(h.$$.fragment,d),this.h()},h(){w(i,"class","font-light text-xs"),w(a,"class","mt-1"),w(e,"class","flex gap-2 text-sm")},m(d,k){I(d,e,k),H(s,e,null),D(e,t),D(e,a),D(a,r),D(a,c),D(a,i),D(i,_),D(i,f),I(d,$,k),H(o,d,k),I(d,u,k),H(h,d,k),m=!0},p(d,k){const B={};k&2&&(B.username=d[4].username),s.$set(B),(!m||k&2)&&l!==(l=d[4].username+"")&&F(r,l),(!m||k&2)&&g!==(g=d[4].username+"")&&F(f,g);const z={};k&2050&&(z.$$scope={dirty:k,ctx:d}),o.$set(z)},i(d){m||(v(s.$$.fragment,d),v(o.$$.fragment,d),v(h.$$.fragment,d),m=!0)},o(d){b(s.$$.fragment,d),b(o.$$.fragment,d),b(h.$$.fragment,d),m=!1},d(d){d&&(p(e),p($),p(u)),A(s),A(o,d),A(h,d)}}}function ke(n){let e,s,t=ae(n[1].expand.tags),a=[];for(let r=0;r<t.length;r+=1)a[r]=we(ve(n,t,r));const l=r=>b(a[r],1,1,()=>{a[r]=null});return{c(){for(let r=0;r<a.length;r+=1)a[r].c();e=O()},l(r){for(let c=0;c<a.length;c+=1)a[c].l(r);e=O()},m(r,c){for(let i=0;i<a.length;i+=1)a[i]&&a[i].m(r,c);I(r,e,c),s=!0},p(r,c){if(c&2){t=ae(r[1].expand.tags);let i;for(i=0;i<t.length;i+=1){const _=ve(r,t,i);a[i]?(a[i].p(_,c),v(a[i],1)):(a[i]=we(_),a[i].c(),v(a[i],1),a[i].m(e.parentNode,e))}for(Y(),i=t.length;i<a.length;i+=1)l(i);Z()}},i(r){if(!s){for(let c=0;c<t.length;c+=1)v(a[c]);s=!0}},o(r){a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)b(a[c]);s=!1},d(r){r&&p(e),Ie(a,r)}}}function ht(n){let e=n[5].name+"",s;return{c(){s=G(e)},l(t){s=L(t,e)},m(t,a){I(t,s,a)},p(t,a){a&2&&e!==(e=t[5].name+"")&&F(s,e)},d(t){t&&p(s)}}}function we(n){let e,s;return e=new mt({props:{class:"ml-1",$$slots:{default:[ht]},$$scope:{ctx:n}}}),{c(){y(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,a){H(e,t,a),s=!0},p(t,a){const l={};a&2050&&(l.$$scope={dirty:a,ctx:t}),e.$set(l)},i(t){s||(v(e.$$.fragment,t),s=!0)},o(t){b(e.$$.fragment,t),s=!1},d(t){A(e,t)}}}function bt(n){var $;let e,s,t,a,l,r,c,i,_,g;e=new Qe({props:{$$slots:{default:[$t]},$$scope:{ctx:n}}});let f=(($=n[1].expand)==null?void 0:$.tags)&&ke(n);return{c(){y(e.$$.fragment),s=P(),t=V("div"),a=V("img"),c=P(),i=V("div"),_=V("div"),f&&f.c(),this.h()},l(o){S(e.$$.fragment,o),s=T(o),t=C(o,"DIV",{class:!0});var u=j(t);a=C(u,"IMG",{src:!0,alt:!0,class:!0}),u.forEach(p),c=T(o),i=C(o,"DIV",{class:!0});var h=j(i);_=C(h,"DIV",{class:!0});var m=j(_);f&&f.l(m),m.forEach(p),h.forEach(p),this.h()},h(){te(a.src,l=n[1].image.replace(/\?thumb=.*/,""))||w(a,"src",l),w(a,"alt",r=n[1].title),w(a,"class","object-contain w-full rounded-lg"),w(t,"class","relative aspect-[4/3] w-full mt-4 flex justify-center rounded-lg overflow-hidden bg-neutral-200"),w(_,"class","flex space-y-1 flex-wrap"),w(i,"class","flex justify-between items-center mt-4")},m(o,u){H(e,o,u),I(o,s,u),I(o,t,u),D(t,a),I(o,c,u),I(o,i,u),D(i,_),f&&f.m(_,null),g=!0},p(o,u){var m;const h={};u&2050&&(h.$$scope={dirty:u,ctx:o}),e.$set(h),(!g||u&2&&!te(a.src,l=o[1].image.replace(/\?thumb=.*/,"")))&&w(a,"src",l),(!g||u&2&&r!==(r=o[1].title))&&w(a,"alt",r),(m=o[1].expand)!=null&&m.tags?f?(f.p(o,u),u&2&&v(f,1)):(f=ke(o),f.c(),v(f,1),f.m(_,null)):f&&(Y(),b(f,1,1,()=>{f=null}),Z())},i(o){g||(v(e.$$.fragment,o),v(f),g=!0)},o(o){b(e.$$.fragment,o),b(f),g=!1},d(o){o&&(p(s),p(t),p(c),p(i)),A(e,o),f&&f.d()}}}function kt(n){return{c:M,l:M,m:M,p:M,i:M,o:M,d:M}}function wt(n){let e,s,t=n[1]&&be(n);return{c(){t&&t.c(),e=O()},l(a){t&&t.l(a),e=O()},m(a,l){t&&t.m(a,l),I(a,e,l),s=!0},p(a,l){a[1]?t?(t.p(a,l),l&2&&v(t,1)):(t=be(a),t.c(),v(t,1),t.m(e.parentNode,e)):t&&(Y(),b(t,1,1,()=>{t=null}),Z())},i(a){s||(v(t),s=!0)},o(a){b(t),s=!1},d(a){a&&p(e),t&&t.d(a)}}}function Dt(n){let e,s,t="Discover Ideas",a,l,r,c,i,_,g=ae(n[0]),f=[];for(let o=0;o<g.length;o+=1)f[o]=he($e(n,g,o));const $=o=>b(f[o],1,1,()=>{f[o]=null});return i=new Ke({props:{open:!!n[1],onOpenChange:n[3],$$slots:{default:[wt]},$$scope:{ctx:n}}}),{c(){e=V("div"),s=V("h1"),s.textContent=t,a=P(),l=V("div");for(let o=0;o<f.length;o+=1)f[o].c();r=P(),c=V("div"),y(i.$$.fragment),this.h()},l(o){e=C(o,"DIV",{class:!0});var u=j(e);s=C(u,"H1",{class:!0,"data-svelte-h":!0}),De(s)!=="svelte-13he1f5"&&(s.textContent=t),a=T(u),l=C(u,"DIV",{class:!0});var h=j(l);for(let d=0;d<f.length;d+=1)f[d].l(h);h.forEach(p),u.forEach(p),r=T(o),c=C(o,"DIV",{class:!0});var m=j(c);S(i.$$.fragment,m),m.forEach(p),this.h()},h(){w(s,"class","text-2xl font-bold mb-6"),w(l,"class","grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"),w(e,"class","container mx-auto p-4"),w(c,"class","fixed")},m(o,u){I(o,e,u),D(e,s),D(e,a),D(e,l);for(let h=0;h<f.length;h+=1)f[h]&&f[h].m(l,null);I(o,r,u),I(o,c,u),H(i,c,null),_=!0},p(o,[u]){if(u&3){g=ae(o[0]);let m;for(m=0;m<g.length;m+=1){const d=$e(o,g,m);f[m]?(f[m].p(d,u),v(f[m],1)):(f[m]=he(d),f[m].c(),v(f[m],1),f[m].m(l,null))}for(Y(),m=g.length;m<f.length;m+=1)$(m);Z()}const h={};u&2&&(h.open=!!o[1]),u&2&&(h.onOpenChange=o[3]),u&2050&&(h.$$scope={dirty:u,ctx:o}),i.$set(h)},i(o){if(!_){for(let u=0;u<g.length;u+=1)v(f[u]);v(i.$$.fragment,o),_=!0}},o(o){f=f.filter(Boolean);for(let u=0;u<f.length;u+=1)b(f[u]);b(i.$$.fragment,o),_=!1},d(o){o&&(p(e),p(r),p(c)),Ie(f,o),A(i)}}}function It(n,e,s){let t,{pins:a}=e;const l=c=>s(1,t=c),r=()=>s(1,t=null);return n.$$set=c=>{"pins"in c&&s(0,a=c.pins)},[a,t,l,r]}class Et extends Q{constructor(e){super(),W(this,e,It,Dt,K,{pins:0})}}function Vt(n){let e,s,t,a;return e=new Ze({props:{me:!0,search:!0}}),t=new Et({props:{pins:n[0]}}),{c(){y(e.$$.fragment),s=P(),y(t.$$.fragment)},l(l){S(e.$$.fragment,l),s=T(l),S(t.$$.fragment,l)},m(l,r){H(e,l,r),I(l,s,r),H(t,l,r),a=!0},p(l,[r]){const c={};r&1&&(c.pins=l[0]),t.$set(c)},i(l){a||(v(e.$$.fragment,l),v(t.$$.fragment,l),a=!0)},o(l){b(e.$$.fragment,l),b(t.$$.fragment,l),a=!1},d(l){l&&p(s),A(e,l),A(t,l)}}}function Ct(n,e,s){let t=[];Te(async()=>{const l=await X.collection("image_posts").getList(1,50,{fields:"*,expand.saved_posts_via_saved,expand.liked_via_post.id,expand.liked_via_post.owner,expand.tags.name",expand:"saved_posts_via_saved,liked_via_post,tags",sort:"-created"});console.log(l.items[0].expand),s(0,t=l.items.map(r=>(r.image=`/api/files/${r.collectionId}/${r.id}/${r.image}?thumb=300x350`,r.saved=(r.expand??{}).saved_posts_via_saved?r.expand.saved_posts_via_saved[0].id:"",r)))});const a=X.collection("image_posts").subscribe("*",async({action:l,record:r})=>{if(l=="create"){const c=await X.collection("users").getOne(r.owner);r.expand={owner:c},r.image=`/api/files/${r.collectionId}/${r.id}/${r.image}?thumb=300x350`,r.saved=(r.expand??{}).saved_posts_via_saved?r.expand.saved_posts_via_saved[0].id:"",s(0,t=[r,...t])}});return ze(async()=>{(await a)()}),[t]}class Ht extends Q{constructor(e){super(),W(this,e,Ct,Vt,K,{})}}export{Ht as component};
