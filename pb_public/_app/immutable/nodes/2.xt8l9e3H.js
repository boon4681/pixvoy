import{s as K,e as y,a as G,t as q,c as C,b as A,g as z,f as g,d as O,y as te,x as k,i as I,h as w,F as Ie,G as Ee,j as Q,H as Ve,k as ye,n as B,I as Ce,w as L,v as me,l as re,m as je,o as Ne,J as de,u as Se,p as He,q as Ae,K as Pe,L as De,A as Be,M as Ge}from"../chunks/scheduler.leJ1pmg5.js";import{S as W,i as Y,c as j,a as N,m as S,g as Z,b as h,e as x,t as v,d as H}from"../chunks/index.JzYhUvao.js";import{B as ae,u as ze,p as F,b as Me,c as _e,g as qe,e as se}from"../chunks/Toaster.svelte_svelte_type_style_lang.CE3nXuUx.js";import{S as Oe,A as Te,a as Le,b as Re,R as Xe,h as ge,u as Fe,D as Je,c as Ke,d as Ue,e as Qe,H as We}from"../chunks/header.DzYQNfu1.js";import{c as Ye}from"../chunks/clickToCopy.EVpgN6HU.js";import{H as Ze}from"../chunks/heart.8d8OK00F.js";function xe(n){let e,s;return e=new Oe({props:{class:"h-4 w-4"}}),{c(){j(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,a){S(e,t,a),s=!0},p:B,i(t){s||(v(e.$$.fragment,t),s=!0)},o(t){h(e.$$.fragment,t),s=!1},d(t){H(e,t)}}}function et(n){let e,s;return e=new ae({props:{variant:"secondary",size:"sm",class:"rounded-full",$$slots:{default:[at]},$$scope:{ctx:n}}}),e.$on("click",n[8]),{c(){j(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,a){S(e,t,a),s=!0},p(t,a){const l={};a&512&&(l.$$scope={dirty:a,ctx:t}),e.$set(l)},i(t){s||(v(e.$$.fragment,t),s=!0)},o(t){h(e.$$.fragment,t),s=!1},d(t){H(e,t)}}}function tt(n){let e,s;return e=new ae({props:{variant:"blue",size:"sm",class:"rounded-full",$$slots:{default:[st]},$$scope:{ctx:n}}}),e.$on("click",n[7]),{c(){j(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,a){S(e,t,a),s=!0},p(t,a){const l={};a&512&&(l.$$scope={dirty:a,ctx:t}),e.$set(l)},i(t){s||(v(e.$$.fragment,t),s=!0)},o(t){h(e.$$.fragment,t),s=!1},d(t){H(e,t)}}}function at(n){let e;return{c(){e=q("Save")},l(s){e=O(s,"Save")},m(s,t){I(s,e,t)},d(s){s&&g(e)}}}function st(n){let e;return{c(){e=q("Saved")},l(s){e=O(s,"Saved")},m(s,t){I(s,e,t)},d(s){s&&g(e)}}}function lt(n){let e,s;return e=new Ze({props:{class:`h-4 w-4 ${n[4]?"fill-red-500 text-red-500":"text-gray-700"}`}}),{c(){j(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,a){S(e,t,a),s=!0},p(t,a){const l={};a&16&&(l.class=`h-4 w-4 ${t[4]?"fill-red-500 text-red-500":"text-gray-700"}`),e.$set(l)},i(t){s||(v(e.$$.fragment,t),s=!0)},o(t){h(e.$$.fragment,t),s=!1},d(t){H(e,t)}}}function nt(n){let e,s,t,a,l,r,f,i,d,$,c,b,o,u,p,_,m,E,M,P,R,le,ie;d=new ae({props:{variant:"secondary",size:"icon",class:"rounded-full",$$slots:{default:[xe]},$$scope:{ctx:n}}});const oe=[tt,et],T=[];function fe(D,V){return D[0]?0:1}return _=fe(n),m=T[_]=oe[_](n),P=new ae({props:{variant:"ghost",size:"icon",class:"rounded-full bg-white bg-opacity-50 hover:bg-opacity-75 flex content-center",$$slots:{default:[lt]},$$scope:{ctx:n}}}),{c(){e=y("div"),s=y("img"),a=G(),l=y("div"),r=G(),f=y("div"),i=y("div"),j(d.$$.fragment),$=G(),c=y("div"),b=y("h3"),o=q(n[3]),u=G(),p=y("div"),m.c(),E=G(),M=y("div"),j(P.$$.fragment),this.h()},l(D){e=C(D,"DIV",{class:!0});var V=A(e);s=C(V,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),a=z(V),l=C(V,"DIV",{class:!0}),A(l).forEach(g),r=z(V),f=C(V,"DIV",{class:!0});var U=A(f);i=C(U,"DIV",{});var J=A(i);N(d.$$.fragment,J),J.forEach(g),U.forEach(g),$=z(V),c=C(V,"DIV",{class:!0});var X=A(c);b=C(X,"H3",{class:!0});var ce=A(b);o=O(ce,n[3]),ce.forEach(g),u=z(X),p=C(X,"DIV",{class:!0});var ee=A(p);m.l(ee),E=z(ee),M=C(ee,"DIV",{class:!0});var ue=A(M);N(P.$$.fragment,ue),ue.forEach(g),ee.forEach(g),X.forEach(g),V.forEach(g),this.h()},h(){te(s.src,t=n[2])||k(s,"src",t),k(s,"alt",n[3]),k(s,"width",300),k(s,"height",400),k(s,"class","object-cover w-full h-full transition-transform duration-300 group-hover:scale-105"),k(l,"class","absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-opacity duration-300 flex flex-col justify-between p-4"),k(f,"class","absolute top-4 right-4 flex justify-end opacity-0 group-hover:opacity-100 transition-opacity duration-300"),k(b,"class","text-white font-semibold truncate"),k(M,"class","flex space-x-2"),k(p,"class","flex justify-between items-center mt-2"),k(c,"class","absolute bottom-0 p-4 w-full opacity-0 group-hover:opacity-100 transition-opacity duration-300"),k(e,"class","relative group overflow-hidden rounded-lg select-none")},m(D,V){I(D,e,V),w(e,s),w(e,a),w(e,l),w(e,r),w(e,f),w(f,i),S(d,i,null),w(e,$),w(e,c),w(c,b),w(b,o),w(c,u),w(c,p),T[_].m(p,null),w(p,E),w(p,M),S(P,M,null),R=!0,le||(ie=[Ie(l,"click",n[6]),Ee(Ye.call(null,i,window.location.href))],le=!0)},p(D,[V]){(!R||V&4&&!te(s.src,t=D[2]))&&k(s,"src",t),(!R||V&8)&&k(s,"alt",D[3]);const U={};V&512&&(U.$$scope={dirty:V,ctx:D}),d.$set(U),(!R||V&8)&&Q(o,D[3]);let J=_;_=fe(D),_===J?T[_].p(D,V):(Z(),h(T[J],1,1,()=>{T[J]=null}),x(),m=T[_],m?m.p(D,V):(m=T[_]=oe[_](D),m.c()),v(m,1),m.m(p,E));const X={};V&528&&(X.$$scope={dirty:V,ctx:D}),P.$set(X)},i(D){R||(v(d.$$.fragment,D),v(m),v(P.$$.fragment,D),R=!0)},o(D){h(d.$$.fragment,D),h(m),h(P.$$.fragment,D),R=!1},d(D){D&&g(e),H(d),T[_].d(),H(P),le=!1,Ve(ie)}}}function rt(n,e,s){let t;ye(n,ze,b=>s(5,t=b));let{id:a}=e,{src:l}=e,{title:r}=e,{liked:f}=e,{saved:i}=e;function d(b){Ce.call(this,n,b)}const $=async()=>{await F.collection("saved_posts").delete(i),s(0,i="")},c=async()=>{s(0,i=(await F.collection("saved_posts").create({owner:t==null?void 0:t.id,saved:a})).id)};return n.$$set=b=>{"id"in b&&s(1,a=b.id),"src"in b&&s(2,l=b.src),"title"in b&&s(3,r=b.title),"liked"in b&&s(4,f=b.liked),"saved"in b&&s(0,i=b.saved)},[i,a,l,r,f,t,d,$,c]}class it extends W{constructor(e){super(),Y(this,e,rt,nt,K,{id:1,src:2,title:3,liked:4,saved:0})}}function ot(n){let e;return{c(){e=q("PX")},l(s){e=O(s,"PX")},m(s,t){I(s,e,t)},d(s){s&&g(e)}}}function ft(n){let e,s,t,a;return e=new Le({props:{src:"https://avatar.boon4681.com/api/marble/"+n[0]+".svg",alt:"@shadcn"}}),t=new Re({props:{$$slots:{default:[ot]},$$scope:{ctx:n}}}),{c(){j(e.$$.fragment),s=G(),j(t.$$.fragment)},l(l){N(e.$$.fragment,l),s=z(l),N(t.$$.fragment,l)},m(l,r){S(e,l,r),I(l,s,r),S(t,l,r),a=!0},p(l,r){const f={};r&1&&(f.src="https://avatar.boon4681.com/api/marble/"+l[0]+".svg"),e.$set(f);const i={};r&2&&(i.$$scope={dirty:r,ctx:l}),t.$set(i)},i(l){a||(v(e.$$.fragment,l),v(t.$$.fragment,l),a=!0)},o(l){h(e.$$.fragment,l),h(t.$$.fragment,l),a=!1},d(l){l&&g(s),H(e,l),H(t,l)}}}function ct(n){let e,s;return e=new Te({props:{$$slots:{default:[ft]},$$scope:{ctx:n}}}),{c(){j(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,a){S(e,t,a),s=!0},p(t,[a]){const l={};a&3&&(l.$$scope={dirty:a,ctx:t}),e.$set(l)},i(t){s||(v(e.$$.fragment,t),s=!0)},o(t){h(e.$$.fragment,t),s=!1},d(t){H(e,t)}}}function ut(n,e,s){let{username:t}=e;return n.$$set=a=>{"username"in a&&s(0,t=a.username)},[t]}class mt extends W{constructor(e){super(),Y(this,e,ut,ct,K,{username:0})}}const $e=Me({base:"focus:ring-ring inline-flex select-none items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2",variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/80 border-transparent",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 border-transparent",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/80 border-transparent",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ne(n){let e,s,t;const a=n[5].default,l=Ne(a,n,n[4],null);let r=[{href:n[1]},{class:s=_e($e({variant:n[2],className:n[0]}))},n[3]],f={};for(let i=0;i<r.length;i+=1)f=re(f,r[i]);return{c(){e=y(n[1]?"a":"span"),l&&l.c(),this.h()},l(i){e=C(i,((n[1]?"a":"span")||"null").toUpperCase(),{href:!0,class:!0});var d=A(e);l&&l.l(d),d.forEach(g),this.h()},h(){de(n[1]?"a":"span")(e,f)},m(i,d){I(i,e,d),l&&l.m(e,null),t=!0},p(i,d){l&&l.p&&(!t||d&16)&&Se(l,a,i,i[4],t?Ae(a,i[4],d,null):He(i[4]),null),de(i[1]?"a":"span")(e,f=qe(r,[(!t||d&2)&&{href:i[1]},(!t||d&5&&s!==(s=_e($e({variant:i[2],className:i[0]}))))&&{class:s},d&8&&i[3]]))},i(i){t||(v(l,i),t=!0)},o(i){h(l,i),t=!1},d(i){i&&g(e),l&&l.d(i)}}}function dt(n){let e=n[1]?"a":"span",s,t,a=(n[1]?"a":"span")&&ne(n);return{c(){a&&a.c(),s=L()},l(l){a&&a.l(l),s=L()},m(l,r){a&&a.m(l,r),I(l,s,r),t=!0},p(l,[r]){l[1],e?K(e,l[1]?"a":"span")?(a.d(1),a=ne(l),e=l[1]?"a":"span",a.c(),a.m(s.parentNode,s)):a.p(l,r):(a=ne(l),e=l[1]?"a":"span",a.c(),a.m(s.parentNode,s))},i(l){t||(v(a,l),t=!0)},o(l){h(a,l),t=!1},d(l){l&&g(s),a&&a.d(l)}}}function _t(n,e,s){const t=["class","href","variant"];let a=me(e,t),{$$slots:l={},$$scope:r}=e,{class:f=void 0}=e,{href:i=void 0}=e,{variant:d="default"}=e;return n.$$set=$=>{e=re(re({},e),je($)),s(3,a=me(e,t)),"class"in $&&s(0,f=$.class),"href"in $&&s(1,i=$.href),"variant"in $&&s(2,d=$.variant),"$$scope"in $&&s(4,r=$.$$scope)},[f,i,d,a,r,l]}class gt extends W{constructor(e){super(),Y(this,e,_t,dt,K,{class:0,href:1,variant:2})}}function pe(n,e,s){const t=n.slice();return t[5]=e[s],t}function ve(n,e,s){const t=n.slice();return t[8]=e[s],t}function he(n){let e,s;function t(){return n[2](n[8])}return e=new it({props:{id:n[8].id,saved:n[8].saved,liked:n[8].liked,src:n[8].image,title:n[8].title}}),e.$on("click",t),{c(){j(e.$$.fragment)},l(a){N(e.$$.fragment,a)},m(a,l){S(e,a,l),s=!0},p(a,l){n=a;const r={};l&1&&(r.id=n[8].id),l&1&&(r.saved=n[8].saved),l&1&&(r.liked=n[8].liked),l&1&&(r.src=n[8].image),l&1&&(r.title=n[8].title),e.$set(r)},i(a){s||(v(e.$$.fragment,a),s=!0)},o(a){h(e.$$.fragment,a),s=!1},d(a){H(e,a)}}}function be(n){let e,s,t,a={ctx:n,current:null,token:null,hasCatch:!1,pending:wt,then:pt,catch:$t,value:4,blocks:[,,,]};return ge(s=F.send(`/user/view/${n[1].owner}`,{method:"GET"}),a),{c(){e=L(),a.block.c()},l(l){e=L(),a.block.l(l)},m(l,r){I(l,e,r),a.block.m(l,a.anchor=r),a.mount=()=>e.parentNode,a.anchor=e,t=!0},p(l,r){n=l,a.ctx=n,r&2&&s!==(s=F.send(`/user/view/${n[1].owner}`,{method:"GET"}))&&ge(s,a)||Fe(a,n,r)},i(l){t||(v(a.block),t=!0)},o(l){for(let r=0;r<3;r+=1){const f=a.blocks[r];h(f)}t=!1},d(l){l&&g(e),a.block.d(l),a.token=null,a=null}}}function $t(n){return{c:B,l:B,m:B,p:B,i:B,o:B,d:B}}function pt(n){let e,s;return e=new Je({props:{class:"sm:max-w-[700px] w-screen",$$slots:{default:[kt]},$$scope:{ctx:n}}}),{c(){j(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,a){S(e,t,a),s=!0},p(t,a){const l={};a&2050&&(l.$$scope={dirty:a,ctx:t}),e.$set(l)},i(t){s||(v(e.$$.fragment,t),s=!0)},o(t){h(e.$$.fragment,t),s=!1},d(t){H(e,t)}}}function vt(n){let e=n[1].title+"",s;return{c(){s=q(e)},l(t){s=O(t,e)},m(t,a){I(t,s,a)},p(t,a){a&2&&e!==(e=t[1].title+"")&&Q(s,e)},d(t){t&&g(s)}}}function ht(n){let e,s,t,a,l=n[4].username+"",r,f,i,d,$=n[4].username+"",c,b,o,u,p,_;return s=new mt({props:{username:n[4].username}}),o=new Ue({props:{class:"pt-2",$$slots:{default:[vt]},$$scope:{ctx:n}}}),p=new Qe({}),{c(){e=y("div"),j(s.$$.fragment),t=G(),a=y("div"),r=q(l),f=G(),i=y("div"),d=q("@"),c=q($),b=G(),j(o.$$.fragment),u=G(),j(p.$$.fragment),this.h()},l(m){e=C(m,"DIV",{class:!0});var E=A(e);N(s.$$.fragment,E),t=z(E),a=C(E,"DIV",{class:!0});var M=A(a);r=O(M,l),f=z(M),i=C(M,"DIV",{class:!0});var P=A(i);d=O(P,"@"),c=O(P,$),P.forEach(g),M.forEach(g),E.forEach(g),b=z(m),N(o.$$.fragment,m),u=z(m),N(p.$$.fragment,m),this.h()},h(){k(i,"class","font-light text-xs"),k(a,"class","mt-1"),k(e,"class","flex gap-2 text-sm")},m(m,E){I(m,e,E),S(s,e,null),w(e,t),w(e,a),w(a,r),w(a,f),w(a,i),w(i,d),w(i,c),I(m,b,E),S(o,m,E),I(m,u,E),S(p,m,E),_=!0},p(m,E){const M={};E&2&&(M.username=m[4].username),s.$set(M),(!_||E&2)&&l!==(l=m[4].username+"")&&Q(r,l),(!_||E&2)&&$!==($=m[4].username+"")&&Q(c,$);const P={};E&2050&&(P.$$scope={dirty:E,ctx:m}),o.$set(P)},i(m){_||(v(s.$$.fragment,m),v(o.$$.fragment,m),v(p.$$.fragment,m),_=!0)},o(m){h(s.$$.fragment,m),h(o.$$.fragment,m),h(p.$$.fragment,m),_=!1},d(m){m&&(g(e),g(b),g(u)),H(s),H(o,m),H(p,m)}}}function ke(n){let e,s,t=se(n[1].expand.tags),a=[];for(let r=0;r<t.length;r+=1)a[r]=we(pe(n,t,r));const l=r=>h(a[r],1,1,()=>{a[r]=null});return{c(){for(let r=0;r<a.length;r+=1)a[r].c();e=L()},l(r){for(let f=0;f<a.length;f+=1)a[f].l(r);e=L()},m(r,f){for(let i=0;i<a.length;i+=1)a[i]&&a[i].m(r,f);I(r,e,f),s=!0},p(r,f){if(f&2){t=se(r[1].expand.tags);let i;for(i=0;i<t.length;i+=1){const d=pe(r,t,i);a[i]?(a[i].p(d,f),v(a[i],1)):(a[i]=we(d),a[i].c(),v(a[i],1),a[i].m(e.parentNode,e))}for(Z(),i=t.length;i<a.length;i+=1)l(i);x()}},i(r){if(!s){for(let f=0;f<t.length;f+=1)v(a[f]);s=!0}},o(r){a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)h(a[f]);s=!1},d(r){r&&g(e),De(a,r)}}}function bt(n){let e=n[5].name+"",s;return{c(){s=q(e)},l(t){s=O(t,e)},m(t,a){I(t,s,a)},p(t,a){a&2&&e!==(e=t[5].name+"")&&Q(s,e)},d(t){t&&g(s)}}}function we(n){let e,s;return e=new gt({props:{class:"ml-1",$$slots:{default:[bt]},$$scope:{ctx:n}}}),{c(){j(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,a){S(e,t,a),s=!0},p(t,a){const l={};a&2050&&(l.$$scope={dirty:a,ctx:t}),e.$set(l)},i(t){s||(v(e.$$.fragment,t),s=!0)},o(t){h(e.$$.fragment,t),s=!1},d(t){H(e,t)}}}function kt(n){var b;let e,s,t,a,l,r,f,i,d,$;e=new Ke({props:{$$slots:{default:[ht]},$$scope:{ctx:n}}});let c=((b=n[1].expand)==null?void 0:b.tags)&&ke(n);return{c(){j(e.$$.fragment),s=G(),t=y("div"),a=y("img"),f=G(),i=y("div"),d=y("div"),c&&c.c(),this.h()},l(o){N(e.$$.fragment,o),s=z(o),t=C(o,"DIV",{class:!0});var u=A(t);a=C(u,"IMG",{src:!0,alt:!0,class:!0}),u.forEach(g),f=z(o),i=C(o,"DIV",{class:!0});var p=A(i);d=C(p,"DIV",{class:!0});var _=A(d);c&&c.l(_),_.forEach(g),p.forEach(g),this.h()},h(){te(a.src,l=n[1].image.replace(/\?thumb=.*/,""))||k(a,"src",l),k(a,"alt",r=n[1].title),k(a,"class","object-contain w-full rounded-lg"),k(t,"class","relative aspect-[4/3] w-full mt-4 flex justify-center rounded-lg overflow-hidden bg-neutral-200"),k(d,"class","flex space-y-1 flex-wrap"),k(i,"class","flex justify-between items-center mt-4")},m(o,u){S(e,o,u),I(o,s,u),I(o,t,u),w(t,a),I(o,f,u),I(o,i,u),w(i,d),c&&c.m(d,null),$=!0},p(o,u){var _;const p={};u&2050&&(p.$$scope={dirty:u,ctx:o}),e.$set(p),(!$||u&2&&!te(a.src,l=o[1].image.replace(/\?thumb=.*/,"")))&&k(a,"src",l),(!$||u&2&&r!==(r=o[1].title))&&k(a,"alt",r),(_=o[1].expand)!=null&&_.tags?c?(c.p(o,u),u&2&&v(c,1)):(c=ke(o),c.c(),v(c,1),c.m(d,null)):c&&(Z(),h(c,1,1,()=>{c=null}),x())},i(o){$||(v(e.$$.fragment,o),v(c),$=!0)},o(o){h(e.$$.fragment,o),h(c),$=!1},d(o){o&&(g(s),g(t),g(f),g(i)),H(e,o),c&&c.d()}}}function wt(n){return{c:B,l:B,m:B,p:B,i:B,o:B,d:B}}function Dt(n){let e,s,t=n[1]&&be(n);return{c(){t&&t.c(),e=L()},l(a){t&&t.l(a),e=L()},m(a,l){t&&t.m(a,l),I(a,e,l),s=!0},p(a,l){a[1]?t?(t.p(a,l),l&2&&v(t,1)):(t=be(a),t.c(),v(t,1),t.m(e.parentNode,e)):t&&(Z(),h(t,1,1,()=>{t=null}),x())},i(a){s||(v(t),s=!0)},o(a){h(t),s=!1},d(a){a&&g(e),t&&t.d(a)}}}function It(n){let e,s,t="Discover Ideas",a,l,r,f,i,d,$=se(n[0]),c=[];for(let o=0;o<$.length;o+=1)c[o]=he(ve(n,$,o));const b=o=>h(c[o],1,1,()=>{c[o]=null});return i=new Xe({props:{open:!!n[1],onOpenChange:n[3],$$slots:{default:[Dt]},$$scope:{ctx:n}}}),{c(){e=y("div"),s=y("h1"),s.textContent=t,a=G(),l=y("div");for(let o=0;o<c.length;o+=1)c[o].c();r=G(),f=y("div"),j(i.$$.fragment),this.h()},l(o){e=C(o,"DIV",{class:!0});var u=A(e);s=C(u,"H1",{class:!0,"data-svelte-h":!0}),Pe(s)!=="svelte-13he1f5"&&(s.textContent=t),a=z(u),l=C(u,"DIV",{class:!0});var p=A(l);for(let m=0;m<c.length;m+=1)c[m].l(p);p.forEach(g),u.forEach(g),r=z(o),f=C(o,"DIV",{class:!0});var _=A(f);N(i.$$.fragment,_),_.forEach(g),this.h()},h(){k(s,"class","text-2xl font-bold mb-6"),k(l,"class","grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"),k(e,"class","container mx-auto p-4"),k(f,"class","fixed")},m(o,u){I(o,e,u),w(e,s),w(e,a),w(e,l);for(let p=0;p<c.length;p+=1)c[p]&&c[p].m(l,null);I(o,r,u),I(o,f,u),S(i,f,null),d=!0},p(o,[u]){if(u&3){$=se(o[0]);let _;for(_=0;_<$.length;_+=1){const m=ve(o,$,_);c[_]?(c[_].p(m,u),v(c[_],1)):(c[_]=he(m),c[_].c(),v(c[_],1),c[_].m(l,null))}for(Z(),_=$.length;_<c.length;_+=1)b(_);x()}const p={};u&2&&(p.open=!!o[1]),u&2&&(p.onOpenChange=o[3]),u&2050&&(p.$$scope={dirty:u,ctx:o}),i.$set(p)},i(o){if(!d){for(let u=0;u<$.length;u+=1)v(c[u]);v(i.$$.fragment,o),d=!0}},o(o){c=c.filter(Boolean);for(let u=0;u<c.length;u+=1)h(c[u]);h(i.$$.fragment,o),d=!1},d(o){o&&(g(e),g(r),g(f)),De(c,o),H(i)}}}function Et(n,e,s){let t,{pins:a}=e;const l=f=>s(1,t=f),r=()=>s(1,t=null);return n.$$set=f=>{"pins"in f&&s(0,a=f.pins)},[a,t,l,r]}class Vt extends W{constructor(e){super(),Y(this,e,Et,It,K,{pins:0})}}function yt(n){let e,s,t,a;return e=new We({props:{me:!0,search:!0}}),t=new Vt({props:{pins:n[0]}}),{c(){j(e.$$.fragment),s=G(),j(t.$$.fragment)},l(l){N(e.$$.fragment,l),s=z(l),N(t.$$.fragment,l)},m(l,r){S(e,l,r),I(l,s,r),S(t,l,r),a=!0},p(l,[r]){const f={};r&1&&(f.pins=l[0]),t.$set(f)},i(l){a||(v(e.$$.fragment,l),v(t.$$.fragment,l),a=!0)},o(l){h(e.$$.fragment,l),h(t.$$.fragment,l),a=!1},d(l){l&&g(s),H(e,l),H(t,l)}}}function Ct(n,e,s){let t=[];Be(async()=>{const l=await F.collection("image_posts").getList(1,50,{fields:"*,expand.tags.name",expand:"saved_posts_via_saved,tags",sort:"-created"});s(0,t=l.items.map(r=>(r.image=`/api/files/${r.collectionId}/${r.id}/${r.image}?thumb=300x350`,r.saved=(r.expand??{}).saved_posts_via_saved?r.expand.saved_posts_via_saved[0].id:"",r)))});const a=F.collection("image_posts").subscribe("*",async({action:l,record:r})=>{if(l=="create"){const f=await F.collection("users").getOne(r.owner);r.expand={owner:f},r.image=`/api/files/${r.collectionId}/${r.id}/${r.image}?thumb=300x350`,r.saved=(r.expand??{}).saved_posts_via_saved?r.expand.saved_posts_via_saved[0].id:"",s(0,t=[r,...t])}});return Ge(async()=>{(await a)()}),[t]}class Bt extends W{constructor(e){super(),Y(this,e,Ct,yt,K,{})}}export{Bt as component};
