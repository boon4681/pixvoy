import{s as J,e as E,a as B,t as z,c as V,b as y,g as G,f as p,d as L,F as we,y as te,x as k,i as D,h as w,G as Ie,H as Ee,j as U,I as Ve,k as Ce,n as P,J as je,w as O,r as ue,m as ne,v as ye,l as Ne,K as de,u as Se,p as He,q as Ae,L as De,A as Me,M as Pe}from"../chunks/scheduler.AK4xKsFW.js";import{S as Q,i as W,c as N,b as S,m as H,g as Y,a as b,e as Z,t as $,d as A}from"../chunks/index.Dm7DKx6X.js";import{B as re,u as Be,p as X,b as Ge,c as _e,g as Te,e as ae}from"../chunks/Toaster.svelte_svelte_type_style_lang.CIAwtWMz.js";import{S as ze,A as Le,a as qe,b as Oe,R as Re,h as me,u as Xe,D as Fe,c as Je,d as Ke,e as Ue,H as Qe}from"../chunks/header.ta3v8Pud.js";import{c as We}from"../chunks/clickToCopy.B31gAnca.js";function Ye(n){let e,s;return e=new ze({props:{class:"h-4 w-4"}}),{c(){N(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,a){H(e,t,a),s=!0},p:P,i(t){s||($(e.$$.fragment,t),s=!0)},o(t){b(e.$$.fragment,t),s=!1},d(t){A(e,t)}}}function Ze(n){let e,s;return e=new re({props:{variant:"secondary",size:"sm",class:"rounded-full",$$slots:{default:[et]},$$scope:{ctx:n}}}),e.$on("click",n[8]),{c(){N(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,a){H(e,t,a),s=!0},p(t,a){const l={};a&512&&(l.$$scope={dirty:a,ctx:t}),e.$set(l)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){b(e.$$.fragment,t),s=!1},d(t){A(e,t)}}}function xe(n){let e,s;return e=new re({props:{variant:"blue",size:"sm",class:"rounded-full",$$slots:{default:[tt]},$$scope:{ctx:n}}}),e.$on("click",n[7]),{c(){N(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,a){H(e,t,a),s=!0},p(t,a){const l={};a&512&&(l.$$scope={dirty:a,ctx:t}),e.$set(l)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){b(e.$$.fragment,t),s=!1},d(t){A(e,t)}}}function et(n){let e;return{c(){e=z("Save")},l(s){e=L(s,"Save")},m(s,t){D(s,e,t)},d(s){s&&p(e)}}}function tt(n){let e;return{c(){e=z("Saved")},l(s){e=L(s,"Saved")},m(s,t){D(s,e,t)},d(s){s&&p(e)}}}function at(n){let e,s,t,a,l,r,c,i,_,g,f,h,o,u,v,m,d,I,M,T="",R,se,ie;_=new re({props:{variant:"secondary",size:"icon",class:"rounded-full",$$slots:{default:[Ye]},$$scope:{ctx:n}}});const oe=[xe,Ze],q=[];function ce(C,j){return C[0]?0:1}return m=ce(n),d=q[m]=oe[m](n),{c(){e=E("div"),s=E("img"),a=B(),l=E("div"),r=B(),c=E("div"),i=E("div"),N(_.$$.fragment),g=B(),f=E("div"),h=E("h3"),o=z(n[3]),u=B(),v=E("div"),d.c(),I=B(),M=E("div"),M.innerHTML=T,this.h()},l(C){e=V(C,"DIV",{class:!0});var j=y(e);s=V(j,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),a=G(j),l=V(j,"DIV",{class:!0}),y(l).forEach(p),r=G(j),c=V(j,"DIV",{class:!0});var K=y(c);i=V(K,"DIV",{});var F=y(i);S(_.$$.fragment,F),F.forEach(p),K.forEach(p),g=G(j),f=V(j,"DIV",{class:!0});var x=y(f);h=V(x,"H3",{class:!0});var fe=y(h);o=L(fe,n[3]),fe.forEach(p),u=G(x),v=V(x,"DIV",{class:!0});var ee=y(v);d.l(ee),I=G(ee),M=V(ee,"DIV",{class:!0,"data-svelte-h":!0}),we(M)!=="svelte-zvx4vn"&&(M.innerHTML=T),ee.forEach(p),x.forEach(p),j.forEach(p),this.h()},h(){te(s.src,t=n[2])||k(s,"src",t),k(s,"alt",n[3]),k(s,"width",300),k(s,"height",400),k(s,"class","object-cover w-full h-full transition-transform duration-300 group-hover:scale-105"),k(l,"class","absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-opacity duration-300 flex flex-col justify-between p-4"),k(c,"class","absolute top-4 right-4 flex justify-end opacity-0 group-hover:opacity-100 transition-opacity duration-300"),k(h,"class","text-white font-semibold truncate"),k(M,"class","flex space-x-2"),k(v,"class","flex justify-between items-center mt-2"),k(f,"class","absolute bottom-0 p-4 w-full opacity-0 group-hover:opacity-100 transition-opacity duration-300"),k(e,"class","relative group overflow-hidden rounded-lg select-none")},m(C,j){D(C,e,j),w(e,s),w(e,a),w(e,l),w(e,r),w(e,c),w(c,i),H(_,i,null),w(e,g),w(e,f),w(f,h),w(h,o),w(f,u),w(f,v),q[m].m(v,null),w(v,I),w(v,M),R=!0,se||(ie=[Ie(l,"click",n[6]),Ee(We.call(null,i,window.location.href))],se=!0)},p(C,[j]){(!R||j&4&&!te(s.src,t=C[2]))&&k(s,"src",t),(!R||j&8)&&k(s,"alt",C[3]);const K={};j&512&&(K.$$scope={dirty:j,ctx:C}),_.$set(K),(!R||j&8)&&U(o,C[3]);let F=m;m=ce(C),m===F?q[m].p(C,j):(Y(),b(q[F],1,1,()=>{q[F]=null}),Z(),d=q[m],d?d.p(C,j):(d=q[m]=oe[m](C),d.c()),$(d,1),d.m(v,I))},i(C){R||($(_.$$.fragment,C),$(d),R=!0)},o(C){b(_.$$.fragment,C),b(d),R=!1},d(C){C&&p(e),A(_),q[m].d(),se=!1,Ve(ie)}}}function st(n,e,s){let t;Ce(n,Be,h=>s(4,t=h));let{id:a}=e,{src:l}=e,{title:r}=e,{liked:c}=e,{saved:i}=e;function _(h){je.call(this,n,h)}const g=async()=>{await X.collection("saved_posts").delete(i),s(0,i="")},f=async()=>{s(0,i=(await X.collection("saved_posts").create({owner:t==null?void 0:t.id,saved:a})).id)};return n.$$set=h=>{"id"in h&&s(1,a=h.id),"src"in h&&s(2,l=h.src),"title"in h&&s(3,r=h.title),"liked"in h&&s(5,c=h.liked),"saved"in h&&s(0,i=h.saved)},[i,a,l,r,t,c,_,g,f]}class lt extends Q{constructor(e){super(),W(this,e,st,at,J,{id:1,src:2,title:3,liked:5,saved:0})}}function nt(n){let e;return{c(){e=z("PX")},l(s){e=L(s,"PX")},m(s,t){D(s,e,t)},d(s){s&&p(e)}}}function rt(n){let e,s,t,a;return e=new qe({props:{src:"https://avatar.boon4681.com/api/marble/"+n[0]+".svg",alt:"@shadcn"}}),t=new Oe({props:{$$slots:{default:[nt]},$$scope:{ctx:n}}}),{c(){N(e.$$.fragment),s=B(),N(t.$$.fragment)},l(l){S(e.$$.fragment,l),s=G(l),S(t.$$.fragment,l)},m(l,r){H(e,l,r),D(l,s,r),H(t,l,r),a=!0},p(l,r){const c={};r&1&&(c.src="https://avatar.boon4681.com/api/marble/"+l[0]+".svg"),e.$set(c);const i={};r&2&&(i.$$scope={dirty:r,ctx:l}),t.$set(i)},i(l){a||($(e.$$.fragment,l),$(t.$$.fragment,l),a=!0)},o(l){b(e.$$.fragment,l),b(t.$$.fragment,l),a=!1},d(l){l&&p(s),A(e,l),A(t,l)}}}function it(n){let e,s;return e=new Le({props:{$$slots:{default:[rt]},$$scope:{ctx:n}}}),{c(){N(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,a){H(e,t,a),s=!0},p(t,[a]){const l={};a&3&&(l.$$scope={dirty:a,ctx:t}),e.$set(l)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){b(e.$$.fragment,t),s=!1},d(t){A(e,t)}}}function ot(n,e,s){let{username:t}=e;return n.$$set=a=>{"username"in a&&s(0,t=a.username)},[t]}class ct extends Q{constructor(e){super(),W(this,e,ot,it,J,{username:0})}}const pe=Ge({base:"focus:ring-ring inline-flex select-none items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2",variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/80 border-transparent",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 border-transparent",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/80 border-transparent",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function le(n){let e,s,t;const a=n[5].default,l=Ne(a,n,n[4],null);let r=[{href:n[1]},{class:s=_e(pe({variant:n[2],className:n[0]}))},n[3]],c={};for(let i=0;i<r.length;i+=1)c=ne(c,r[i]);return{c(){e=E(n[1]?"a":"span"),l&&l.c(),this.h()},l(i){e=V(i,((n[1]?"a":"span")||"null").toUpperCase(),{href:!0,class:!0});var _=y(e);l&&l.l(_),_.forEach(p),this.h()},h(){de(n[1]?"a":"span")(e,c)},m(i,_){D(i,e,_),l&&l.m(e,null),t=!0},p(i,_){l&&l.p&&(!t||_&16)&&Se(l,a,i,i[4],t?Ae(a,i[4],_,null):He(i[4]),null),de(i[1]?"a":"span")(e,c=Te(r,[(!t||_&2)&&{href:i[1]},(!t||_&5&&s!==(s=_e(pe({variant:i[2],className:i[0]}))))&&{class:s},_&8&&i[3]]))},i(i){t||($(l,i),t=!0)},o(i){b(l,i),t=!1},d(i){i&&p(e),l&&l.d(i)}}}function ft(n){let e=n[1]?"a":"span",s,t,a=(n[1]?"a":"span")&&le(n);return{c(){a&&a.c(),s=O()},l(l){a&&a.l(l),s=O()},m(l,r){a&&a.m(l,r),D(l,s,r),t=!0},p(l,[r]){l[1],e?J(e,l[1]?"a":"span")?(a.d(1),a=le(l),e=l[1]?"a":"span",a.c(),a.m(s.parentNode,s)):a.p(l,r):(a=le(l),e=l[1]?"a":"span",a.c(),a.m(s.parentNode,s))},i(l){t||($(a,l),t=!0)},o(l){b(a,l),t=!1},d(l){l&&p(s),a&&a.d(l)}}}function ut(n,e,s){const t=["class","href","variant"];let a=ue(e,t),{$$slots:l={},$$scope:r}=e,{class:c=void 0}=e,{href:i=void 0}=e,{variant:_="default"}=e;return n.$$set=g=>{e=ne(ne({},e),ye(g)),s(3,a=ue(e,t)),"class"in g&&s(0,c=g.class),"href"in g&&s(1,i=g.href),"variant"in g&&s(2,_=g.variant),"$$scope"in g&&s(4,r=g.$$scope)},[c,i,_,a,r,l]}class dt extends Q{constructor(e){super(),W(this,e,ut,ft,J,{class:0,href:1,variant:2})}}function ge(n,e,s){const t=n.slice();return t[5]=e[s],t}function ve(n,e,s){const t=n.slice();return t[8]=e[s],t}function $e(n){let e,s;function t(){return n[2](n[8])}return e=new lt({props:{id:n[8].id,saved:n[8].saved,liked:n[8].liked,src:n[8].image,title:n[8].title}}),e.$on("click",t),{c(){N(e.$$.fragment)},l(a){S(e.$$.fragment,a)},m(a,l){H(e,a,l),s=!0},p(a,l){n=a;const r={};l&1&&(r.id=n[8].id),l&1&&(r.saved=n[8].saved),l&1&&(r.liked=n[8].liked),l&1&&(r.src=n[8].image),l&1&&(r.title=n[8].title),e.$set(r)},i(a){s||($(e.$$.fragment,a),s=!0)},o(a){b(e.$$.fragment,a),s=!1},d(a){A(e,a)}}}function he(n){let e,s,t,a={ctx:n,current:null,token:null,hasCatch:!1,pending:ht,then:mt,catch:_t,value:4,blocks:[,,,]};return me(s=X.send(`/user/view/${n[1].owner}`,{method:"GET"}),a),{c(){e=O(),a.block.c()},l(l){e=O(),a.block.l(l)},m(l,r){D(l,e,r),a.block.m(l,a.anchor=r),a.mount=()=>e.parentNode,a.anchor=e,t=!0},p(l,r){n=l,a.ctx=n,r&2&&s!==(s=X.send(`/user/view/${n[1].owner}`,{method:"GET"}))&&me(s,a)||Xe(a,n,r)},i(l){t||($(a.block),t=!0)},o(l){for(let r=0;r<3;r+=1){const c=a.blocks[r];b(c)}t=!1},d(l){l&&p(e),a.block.d(l),a.token=null,a=null}}}function _t(n){return{c:P,l:P,m:P,p:P,i:P,o:P,d:P}}function mt(n){let e,s;return e=new Fe({props:{class:"sm:max-w-[700px] w-screen",$$slots:{default:[$t]},$$scope:{ctx:n}}}),{c(){N(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,a){H(e,t,a),s=!0},p(t,a){const l={};a&2050&&(l.$$scope={dirty:a,ctx:t}),e.$set(l)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){b(e.$$.fragment,t),s=!1},d(t){A(e,t)}}}function pt(n){let e=n[1].title+"",s;return{c(){s=z(e)},l(t){s=L(t,e)},m(t,a){D(t,s,a)},p(t,a){a&2&&e!==(e=t[1].title+"")&&U(s,e)},d(t){t&&p(s)}}}function gt(n){let e,s,t,a,l=n[4].username+"",r,c,i,_,g=n[4].username+"",f,h,o,u,v,m;return s=new ct({props:{username:n[4].username}}),o=new Ke({props:{class:"pt-2",$$slots:{default:[pt]},$$scope:{ctx:n}}}),v=new Ue({}),{c(){e=E("div"),N(s.$$.fragment),t=B(),a=E("div"),r=z(l),c=B(),i=E("div"),_=z("@"),f=z(g),h=B(),N(o.$$.fragment),u=B(),N(v.$$.fragment),this.h()},l(d){e=V(d,"DIV",{class:!0});var I=y(e);S(s.$$.fragment,I),t=G(I),a=V(I,"DIV",{class:!0});var M=y(a);r=L(M,l),c=G(M),i=V(M,"DIV",{class:!0});var T=y(i);_=L(T,"@"),f=L(T,g),T.forEach(p),M.forEach(p),I.forEach(p),h=G(d),S(o.$$.fragment,d),u=G(d),S(v.$$.fragment,d),this.h()},h(){k(i,"class","font-light text-xs"),k(a,"class","mt-1"),k(e,"class","flex gap-2 text-sm")},m(d,I){D(d,e,I),H(s,e,null),w(e,t),w(e,a),w(a,r),w(a,c),w(a,i),w(i,_),w(i,f),D(d,h,I),H(o,d,I),D(d,u,I),H(v,d,I),m=!0},p(d,I){const M={};I&2&&(M.username=d[4].username),s.$set(M),(!m||I&2)&&l!==(l=d[4].username+"")&&U(r,l),(!m||I&2)&&g!==(g=d[4].username+"")&&U(f,g);const T={};I&2050&&(T.$$scope={dirty:I,ctx:d}),o.$set(T)},i(d){m||($(s.$$.fragment,d),$(o.$$.fragment,d),$(v.$$.fragment,d),m=!0)},o(d){b(s.$$.fragment,d),b(o.$$.fragment,d),b(v.$$.fragment,d),m=!1},d(d){d&&(p(e),p(h),p(u)),A(s),A(o,d),A(v,d)}}}function be(n){let e,s,t=ae(n[1].expand.tags),a=[];for(let r=0;r<t.length;r+=1)a[r]=ke(ge(n,t,r));const l=r=>b(a[r],1,1,()=>{a[r]=null});return{c(){for(let r=0;r<a.length;r+=1)a[r].c();e=O()},l(r){for(let c=0;c<a.length;c+=1)a[c].l(r);e=O()},m(r,c){for(let i=0;i<a.length;i+=1)a[i]&&a[i].m(r,c);D(r,e,c),s=!0},p(r,c){if(c&2){t=ae(r[1].expand.tags);let i;for(i=0;i<t.length;i+=1){const _=ge(r,t,i);a[i]?(a[i].p(_,c),$(a[i],1)):(a[i]=ke(_),a[i].c(),$(a[i],1),a[i].m(e.parentNode,e))}for(Y(),i=t.length;i<a.length;i+=1)l(i);Z()}},i(r){if(!s){for(let c=0;c<t.length;c+=1)$(a[c]);s=!0}},o(r){a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)b(a[c]);s=!1},d(r){r&&p(e),De(a,r)}}}function vt(n){let e=n[5].name+"",s;return{c(){s=z(e)},l(t){s=L(t,e)},m(t,a){D(t,s,a)},p(t,a){a&2&&e!==(e=t[5].name+"")&&U(s,e)},d(t){t&&p(s)}}}function ke(n){let e,s;return e=new dt({props:{class:"ml-1",$$slots:{default:[vt]},$$scope:{ctx:n}}}),{c(){N(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,a){H(e,t,a),s=!0},p(t,a){const l={};a&2050&&(l.$$scope={dirty:a,ctx:t}),e.$set(l)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){b(e.$$.fragment,t),s=!1},d(t){A(e,t)}}}function $t(n){var h;let e,s,t,a,l,r,c,i,_,g;e=new Je({props:{$$slots:{default:[gt]},$$scope:{ctx:n}}});let f=((h=n[1].expand)==null?void 0:h.tags)&&be(n);return{c(){N(e.$$.fragment),s=B(),t=E("div"),a=E("img"),c=B(),i=E("div"),_=E("div"),f&&f.c(),this.h()},l(o){S(e.$$.fragment,o),s=G(o),t=V(o,"DIV",{class:!0});var u=y(t);a=V(u,"IMG",{src:!0,alt:!0,class:!0}),u.forEach(p),c=G(o),i=V(o,"DIV",{class:!0});var v=y(i);_=V(v,"DIV",{class:!0});var m=y(_);f&&f.l(m),m.forEach(p),v.forEach(p),this.h()},h(){te(a.src,l=n[1].image.replace(/\?thumb=.*/,""))||k(a,"src",l),k(a,"alt",r=n[1].title),k(a,"class","object-contain w-full rounded-lg"),k(t,"class","relative aspect-[4/3] w-full mt-4 flex justify-center rounded-lg overflow-hidden bg-neutral-200"),k(_,"class","flex space-y-1 flex-wrap"),k(i,"class","flex justify-between items-center mt-4")},m(o,u){H(e,o,u),D(o,s,u),D(o,t,u),w(t,a),D(o,c,u),D(o,i,u),w(i,_),f&&f.m(_,null),g=!0},p(o,u){var m;const v={};u&2050&&(v.$$scope={dirty:u,ctx:o}),e.$set(v),(!g||u&2&&!te(a.src,l=o[1].image.replace(/\?thumb=.*/,"")))&&k(a,"src",l),(!g||u&2&&r!==(r=o[1].title))&&k(a,"alt",r),(m=o[1].expand)!=null&&m.tags?f?(f.p(o,u),u&2&&$(f,1)):(f=be(o),f.c(),$(f,1),f.m(_,null)):f&&(Y(),b(f,1,1,()=>{f=null}),Z())},i(o){g||($(e.$$.fragment,o),$(f),g=!0)},o(o){b(e.$$.fragment,o),b(f),g=!1},d(o){o&&(p(s),p(t),p(c),p(i)),A(e,o),f&&f.d()}}}function ht(n){return{c:P,l:P,m:P,p:P,i:P,o:P,d:P}}function bt(n){let e,s,t=n[1]&&he(n);return{c(){t&&t.c(),e=O()},l(a){t&&t.l(a),e=O()},m(a,l){t&&t.m(a,l),D(a,e,l),s=!0},p(a,l){a[1]?t?(t.p(a,l),l&2&&$(t,1)):(t=he(a),t.c(),$(t,1),t.m(e.parentNode,e)):t&&(Y(),b(t,1,1,()=>{t=null}),Z())},i(a){s||($(t),s=!0)},o(a){b(t),s=!1},d(a){a&&p(e),t&&t.d(a)}}}function kt(n){let e,s,t="Discover Ideas",a,l,r,c,i,_,g=ae(n[0]),f=[];for(let o=0;o<g.length;o+=1)f[o]=$e(ve(n,g,o));const h=o=>b(f[o],1,1,()=>{f[o]=null});return i=new Re({props:{open:!!n[1],onOpenChange:n[3],$$slots:{default:[bt]},$$scope:{ctx:n}}}),{c(){e=E("div"),s=E("h1"),s.textContent=t,a=B(),l=E("div");for(let o=0;o<f.length;o+=1)f[o].c();r=B(),c=E("div"),N(i.$$.fragment),this.h()},l(o){e=V(o,"DIV",{class:!0});var u=y(e);s=V(u,"H1",{class:!0,"data-svelte-h":!0}),we(s)!=="svelte-13he1f5"&&(s.textContent=t),a=G(u),l=V(u,"DIV",{class:!0});var v=y(l);for(let d=0;d<f.length;d+=1)f[d].l(v);v.forEach(p),u.forEach(p),r=G(o),c=V(o,"DIV",{class:!0});var m=y(c);S(i.$$.fragment,m),m.forEach(p),this.h()},h(){k(s,"class","text-2xl font-bold mb-6"),k(l,"class","grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"),k(e,"class","container mx-auto p-4"),k(c,"class","fixed")},m(o,u){D(o,e,u),w(e,s),w(e,a),w(e,l);for(let v=0;v<f.length;v+=1)f[v]&&f[v].m(l,null);D(o,r,u),D(o,c,u),H(i,c,null),_=!0},p(o,[u]){if(u&3){g=ae(o[0]);let m;for(m=0;m<g.length;m+=1){const d=ve(o,g,m);f[m]?(f[m].p(d,u),$(f[m],1)):(f[m]=$e(d),f[m].c(),$(f[m],1),f[m].m(l,null))}for(Y(),m=g.length;m<f.length;m+=1)h(m);Z()}const v={};u&2&&(v.open=!!o[1]),u&2&&(v.onOpenChange=o[3]),u&2050&&(v.$$scope={dirty:u,ctx:o}),i.$set(v)},i(o){if(!_){for(let u=0;u<g.length;u+=1)$(f[u]);$(i.$$.fragment,o),_=!0}},o(o){f=f.filter(Boolean);for(let u=0;u<f.length;u+=1)b(f[u]);b(i.$$.fragment,o),_=!1},d(o){o&&(p(e),p(r),p(c)),De(f,o),A(i)}}}function wt(n,e,s){let t,{pins:a}=e;const l=c=>s(1,t=c),r=()=>s(1,t=null);return n.$$set=c=>{"pins"in c&&s(0,a=c.pins)},[a,t,l,r]}class Dt extends Q{constructor(e){super(),W(this,e,wt,kt,J,{pins:0})}}function It(n){let e,s,t,a;return e=new Qe({props:{me:!0,search:!0}}),t=new Dt({props:{pins:n[0]}}),{c(){N(e.$$.fragment),s=B(),N(t.$$.fragment)},l(l){S(e.$$.fragment,l),s=G(l),S(t.$$.fragment,l)},m(l,r){H(e,l,r),D(l,s,r),H(t,l,r),a=!0},p(l,[r]){const c={};r&1&&(c.pins=l[0]),t.$set(c)},i(l){a||($(e.$$.fragment,l),$(t.$$.fragment,l),a=!0)},o(l){b(e.$$.fragment,l),b(t.$$.fragment,l),a=!1},d(l){l&&p(s),A(e,l),A(t,l)}}}function Et(n,e,s){let t=[];Me(async()=>{const l=await X.collection("image_posts").getList(1,50,{fields:"*,expand.saved_posts_via_saved,expand.liked_via_post.id,expand.liked_via_post.owner,expand.tags.name",expand:"saved_posts_via_saved,liked_via_post,tags",sort:"-created"});console.log(l.items[0].expand),s(0,t=l.items.map(r=>(r.image=`/api/files/${r.collectionId}/${r.id}/${r.image}?thumb=300x350`,r.saved=(r.expand??{}).saved_posts_via_saved?r.expand.saved_posts_via_saved[0].id:"",r)))});const a=X.collection("image_posts").subscribe("*",async({action:l,record:r})=>{if(l=="create"){const c=await X.collection("users").getOne(r.owner);r.expand={owner:c},r.image=`/api/files/${r.collectionId}/${r.id}/${r.image}?thumb=300x350`,r.saved=(r.expand??{}).saved_posts_via_saved?r.expand.saved_posts_via_saved[0].id:"",s(0,t=[r,...t])}});return Pe(async()=>{(await a)()}),[t]}class St extends Q{constructor(e){super(),W(this,e,Et,It,J,{})}}export{St as component};
